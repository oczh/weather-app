"use strict";(self.webpackChunkweather_app=self.webpackChunkweather_app||[]).push([[592],{9507:(h,c,r)=>{r.d(c,{s:()=>l});var o=r(3845),s=r(1413),i=r(2024);let l=(()=>{class n{constructor(t){this.requestRxServise=t}onSubmit(t){this.requestRxServise.getCoordinatesByQuery(t.value.location)}static#t=this.\u0275fac=function(a){return new(a||n)(o.Y36(s.P))};static#a=this.\u0275cmp=o.Xpm({type:n,selectors:[["app-location-form"]],decls:11,vars:0,consts:[["novalidate","",3,"ngSubmit"],["locationF","ngForm"],[1,"form-row","align-items-center","opacity-30"],[1,"col-sm-3","my-1"],["for","location",1,"sr-only"],["ngModel","","type","text","name","location","id","location",1,"form-control"],["location","ngModel"],[1,"col-auto","my-1"],["type","submit",1,"btn","btn-success"]],template:function(a,e){if(1&a){const u=o.EpF();o.TgZ(0,"form",0,1),o.NdJ("ngSubmit",function(){o.CHM(u);const m=o.MAs(1);return o.KtG(e.onSubmit(m))}),o.TgZ(2,"div",2)(3,"div",3)(4,"label",4),o._uU(5,"Other location"),o.qZA(),o._UZ(6,"input",5,6),o.qZA(),o.TgZ(8,"div",7)(9,"button",8),o._uU(10,"Submit"),o.qZA()()()()}},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.On,i.F]})}return n})()},1413:(h,c,r)=>{r.d(c,{P:()=>l});var o=r(8071),s=r(3845),i=r(4860);let l=(()=>{class n{constructor(t){this.http=t,this.coord$=new o.X({lat:0,lon:0}),this.appid="6c46aa43db7539a6daf11a763626b3d2",this.lang=navigator.language,this.units="metric",this.currentWeatherData={},this.forcastWearherData={},this.curWeaDatasArr=[]}readNavigatorCoords(){navigator.geolocation.getCurrentPosition(t=>{this.coord$.next({lat:t.coords.latitude,lon:t.coords.longitude})})}getCoordinatesByQuery(t){this.http.get(`https://api.openweathermap.org/geo/1.0/direct?q=${t}&limit=5&appid=${this.appid}`).subscribe({next:a=>{console.log(a),this.coord$.next({lat:a[0].lat,lon:a[0].lon})},error:a=>console.error(a),complete:()=>console.info("complete: getCoordinatesByQuery")})}getCurrentData(){this.http.get(`https://api.openweathermap.org/data/2.5/weather?lat=${this.coord$.getValue().lat}&lon=${this.coord$.getValue().lon}&lang=${this.lang}&appid=${this.appid}&units=${this.units}`).subscribe({next:t=>{this.makeCurrentWeatherObject(t)},error:t=>console.error(t),complete:()=>console.info("complete: getCurrentData")})}getForcastData(){return this.http.get(`https://api.openweathermap.org/data/2.5/forecast?lat=${this.coord$.getValue().lat}&lon=${this.coord$.getValue().lon}&lang=${this.lang}&appid=${this.appid}&units=${this.units}`).subscribe({next:t=>{this.makeForecastWeatherObject(t)},error:t=>console.error(t),complete:()=>console.info("complete: getForcastData")})}makeCurrentWeatherObject(t){let a={};a.location=t.name,a.weather_icon=t.weather[0].icon,a.weather=t.weather[0].main,a.temperature=Math.round(t.main.temp),a.windSpeed=Math.round(t.wind.speed),a.cloudness=t.clouds.all,a.pressure=t.main.pressure,a.humidity=t.main.humidity,a.sunrise=new Date(1e3*t.sys.sunrise).toLocaleTimeString(this.lang,{hour:"numeric",minute:"numeric"}),a.sunset=new Date(1e3*t.sys.sunset).toLocaleTimeString(this.lang,{hour:"numeric",minute:"numeric"}),a.rain=t.rain?.["1h"],a.snow=t.snow?.["1h"],this.curWeaDatasArr.push(a),this.curWeaDatasArr=[...new Map(this.curWeaDatasArr.map(e=>[e.location,e])).values()]}makeForecastWeatherObject(t){this.forcastWearherData.location=t.city.name,this.forcastWearherData.forecastArr=[];for(let a=0;a<t.list.length;a++){let e={};e.time=new Date(t.list[a].dt_txt).toLocaleTimeString(this.lang,{weekday:"long",hour:"numeric",dayPeriod:"short"})+"h",e.weather_icon=t.list[a].weather[0].icon,e.weather=t.list[a].weather[0].main,e.temperature=Math.round(t.list[a].main.temp),e.windSpeed=Math.round(t.list[a].wind.speed),e.cloudness=t.list[a].clouds.all,e.pressure=t.list[a].main.pressure,e.humidity=t.list[a].main.humidity,e.rain=t.list[a].rain?.["3h"],e.snow=t.list[a].snow?.["3h"],this.forcastWearherData.forecastArr.push(e)}}static#t=this.\u0275fac=function(a){return new(a||n)(s.LFG(i.eN))};static#a=this.\u0275prov=s.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()},6208:(h,c,r)=>{r.d(c,{m:()=>l});var o=r(6575),s=r(2024),i=r(3845);let l=(()=>{class n{static#t=this.\u0275fac=function(a){return new(a||n)};static#a=this.\u0275mod=i.oAB({type:n});static#o=this.\u0275inj=i.cJS({imports:[o.ez,s.u5]})}return n})()}}]);
//# sourceMappingURL=common.5692391e04943c76.js.map